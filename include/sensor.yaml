sensor:
  #################################################
  #                                               #
  #                    HASS                       #
  #                                               #
  #################################################
  - platform: version
    name: hass_version_installed
    source: local

  - platform: version
    name: hass_version_latest
    source: container

  - platform: version
    name: hass_version_latest_beta
    source: container
    beta: true

  - platform: rest
    name: hass_release_notes
    resource: https://api.github.com/repos/home-assistant/core/releases/latest
    value_template: >
      {{ value_json.name }}
    json_attributes:
      - body
    scan_interval: 21600

  - platform: rest
    name: hass_release_notes_rc
    resource: https://api.github.com/repos/home-assistant/core/releases?per_page=1
    value_template: >
      {{ value_json[0].name }}
    json_attributes:
      - body
    scan_interval: 21600

  - platform: systemmonitor
    resources:
      - type: disk_use_percent
        arg: /
      - type: memory_use_percent
      - type: processor_use
      - type: last_boot
    scan_interval: 120

  - platform: uptime

  - platform: time_date
    display_options:
      - time
      - date

  #################################################
  #                                               #
  #                    UNIFI                      #
  #                                               #
  #################################################
  # - platform: command_line
  #   name: udm_unifios
  #   command: !secret udm_unifios
  #   value_template: |-
  #     {% set json = value_json.data[0] %}
  #     {{ json["system-stats"].cpu }}|
  #     {{ json.temperatures[1].value | round(1) }}|
  #     {{ json["system-stats"].mem }}|
  #     {{ ((json.storage[1].used / json.storage[1].size) * 100) | round(1) }}|
  #     {{ json.internet }}|
  #     {{ json.startup_timestamp | timestamp_local }}|
  #     {{ json.displayable_version }}|
  #     {{ json.upgradable }}
  #   scan_interval: 120

  - platform: dnsip

  #################################################
  #                                               #
  #                    DOCKER                     #
  #                                               #
  #################################################
  - platform: rest
    name: docker_cpu
    resource: !secret ha_dockermon_cpu
    value_template: >
      {% set cpuDelta = value_json.cpu_stats.cpu_usage.total_usage - value_json.precpu_stats.cpu_usage.total_usage %}
      {% set systemDelta = value_json.cpu_stats.system_cpu_usage - value_json.precpu_stats.system_cpu_usage %}
      {{ (cpuDelta / systemDelta * value_json.cpu_stats.cpu_usage.percpu_usage | length * 100) | round(1) }}
    json_attributes:
      - cpu_stats
      - precpu_stats
      - memory_stats
    scan_interval: 120

  #################################################
  #                                               #
  #                    RPI                        #
  #                                               #
  #################################################
  # - platform: command_line
  #   name: rpi_sd
  #   command: !secret rpi_sd
  #   unit_of_measurement: '%'
  #   value_template: >
  #     {{ value[:-1] }}
  #   scan_interval: 300

  # - platform: command_line
  #   name: rpi_cpu
  #   command: !secret rpi_cpu
  #   unit_of_measurement: '%'
  #   scan_interval: 300

  # - platform: command_line
  #   name: rpi_mem
  #   command: !secret rpi_mem
  #   unit_of_measurement: '%'
  #   value_template: >
  #     {{ value | round(1) }}
  #   scan_interval: 300

  # - platform: command_line
  #   name: rpi_uptime
  #   command: !secret rpi_uptime
  #   value_template: >
  #     {{ value | replace(' ', 'T') }}
  #   scan_interval: 300
